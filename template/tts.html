<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TTS â€¢ {{ app_name }}</title>
    <link rel="icon" type="image/png" href="/favicon.png" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              primary: '#22d3ee',
              accent: '#8b5cf6',
              bg: '#0f172a',
              panel: '#0b1220',
            },
            backgroundImage: {
              'gradient-radial': 'radial-gradient(1200px 600px at 20% 0%, rgba(34,211,238,0.06), transparent)',
              'gradient-radial-2': 'radial-gradient(1200px 600px at 80% 100%, rgba(139,92,246,0.08), transparent)',
            },
          },
        },
      }
    </script>
  </head>
  <body>
    <!-- Main Content Area -->
  <div class="flex-1" id="main-content">
        <div class="container max-w-4xl mx-auto px-5 py-6">
          <header class="text-center mb-10">
            <h1 class="text-3xl font-bold text-cyan-400 mb-2">Text-to-Speech</h1>
            <p class="text-gray-400">Convert text to natural-sounding speech</p>
          </header>

          <main>
            <section class="bg-slate-800/95 border border-slate-700 rounded-xl p-6 mb-6 backdrop-blur-sm">
              <h2 class="text-xl font-semibold text-cyan-400 mb-5">Generate Speech</h2>

              <div class="space-y-6">
                <!-- Text Input -->
                <div class="space-y-2">
                  <label for="tts-text" class="text-sm font-medium text-gray-200">Enter Text</label>
                  <textarea
                    id="tts-text"
                    rows="6"
                    class="w-full px-4 py-3 border border-slate-600 rounded-lg bg-slate-900/60 text-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 transition-all duration-200 placeholder:text-gray-500"
                    placeholder="Enter the text you want to convert to speech..."
                  ></textarea>
                </div>

                <!-- Voice Selection -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div class="space-y-2">
                    <label for="voice-select" class="text-sm font-medium text-gray-200">Voice</label>
                    <select id="voice-select" class="w-full px-4 py-3 border border-slate-600 rounded-lg bg-slate-900/60 text-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 transition-all duration-200">
                      <option value="default">Default Voice</option>
                      <option value="female">Female Voice</option>
                      <option value="male">Male Voice</option>
                    </select>
                  </div>

                  <div class="space-y-2">
                    <label for="speed-select" class="text-sm font-medium text-gray-200">Speed</label>
                    <select id="speed-select" class="w-full px-4 py-3 border border-slate-600 rounded-lg bg-slate-900/60 text-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-400/50 focus:border-cyan-400 transition-all duration-200">
                      <option value="slow">Slow</option>
                      <option value="normal" selected>Normal</option>
                      <option value="fast">Fast</option>
                    </select>
                  </div>
                </div>

                <!-- Generate Button -->
                <div class="flex justify-center">
                  <button id="generate-btn" class="px-8 py-3 bg-gradient-to-r from-cyan-400 to-violet-500 text-slate-900 font-semibold rounded-lg hover:-translate-y-0.5 hover:shadow-lg hover:shadow-cyan-400/30 transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none">
                    Generate Speech
                  </button>
                </div>
              </div>

              <!-- Error/Success Messages -->
              <div id="tts-error" class="hidden mt-4 p-4 rounded-lg bg-red-500/10 border border-red-500/30 text-red-300"></div>
              <div id="tts-success" class="hidden mt-4 p-4 rounded-lg bg-green-500/10 border border-green-500/30 text-green-300"></div>
            </section>

            <!-- Audio Output Section -->
            <section id="audio-output" class="hidden bg-slate-800/95 border border-slate-700 rounded-xl p-6 mb-6 backdrop-blur-sm">
              <h3 class="text-lg font-semibold text-cyan-400 mb-4">Generated Audio</h3>
              <audio id="tts-audio" controls class="w-full mb-4"></audio>
              <div class="flex gap-3">
                <button id="download-btn" class="px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors duration-200">
                  Download Audio
                </button>
                <button id="new-btn" class="px-4 py-2 bg-slate-600 hover:bg-slate-700 text-white rounded-lg transition-colors duration-200">
                  Generate New
                </button>
              </div>
            </section>
          </main>
        </div>
      </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-slate-900/90 hidden items-center justify-center z-50">
      <div class="text-center">
        <div class="w-12 h-12 border-4 border-cyan-400/20 border-t-cyan-400 rounded-full animate-spin mx-auto mb-4"></div>
        <div class="text-gray-200 text-base">Generating speech...</div>
      </div>
    </div>

    <script>
      // Navigation function for smooth page transitions
      function navigateToPage(page) {
        const mainContent = document.getElementById('main-content');
        const sidebar = document.getElementById('sidebar');

        // Add fade-out animation
        mainContent.style.transition = 'all 0.3s ease-in-out';
        mainContent.style.opacity = '0';
        mainContent.style.transform = 'scale(0.95)';

        setTimeout(() => {
          if (page === 'admin') {
            window.location.href = '/admin';
          } else if (page === 'tts') {
            mainContent.style.opacity = '1';
            mainContent.style.transform = 'scale(1)';
          } else if (page === 'asr') {
            window.location.href = '/';
          }
        }, 300);
      }

      // TTS functionality
      const generateBtn = document.getElementById('generate-btn');
      const ttsText = document.getElementById('tts-text');
      const voiceSelect = document.getElementById('voice-select');
      const speedSelect = document.getElementById('speed-select');
      const loadingOverlay = document.getElementById('loading-overlay');
      const audioOutput = document.getElementById('audio-output');
      const ttsAudio = document.getElementById('tts-audio');
      const ttsError = document.getElementById('tts-error');
      const ttsSuccess = document.getElementById('tts-success');
      const downloadBtn = document.getElementById('download-btn');
      const newBtn = document.getElementById('new-btn');

      generateBtn.addEventListener('click', async () => {
        const text = ttsText.value.trim();

        if (!text) {
          showError('Please enter some text to convert to speech.');
          return;
        }

        generateBtn.disabled = true;
        loadingOverlay.style.display = 'flex';
        hideMessages();

        try {
          // Simulate TTS generation (replace with actual API call)
          await new Promise(resolve => setTimeout(resolve, 2000));

          // For demo purposes, create a simple audio URL
          // In production, this would come from your TTS service
          const audioUrl = 'data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBTGH0fPTgjMGHm7A7+OZURE';

          ttsAudio.src = audioUrl;
          audioOutput.classList.remove('hidden');
          showSuccess('Speech generated successfully!');

        } catch (error) {
          showError('Failed to generate speech. Please try again.');
        } finally {
          generateBtn.disabled = false;
          loadingOverlay.style.display = 'none';
        }
      });

      downloadBtn.addEventListener('click', () => {
        const audioUrl = ttsAudio.src;
        const a = document.createElement('a');
        a.href = audioUrl;
        a.download = 'tts-audio.wav';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
      });

      newBtn.addEventListener('click', () => {
        ttsText.value = '';
        audioOutput.classList.add('hidden');
        ttsAudio.src = '';
        hideMessages();
        ttsText.focus();
      });

      function showError(message) {
        ttsError.textContent = message;
        ttsError.classList.remove('hidden');
        ttsSuccess.classList.add('hidden');
      }

      function showSuccess(message) {
        ttsSuccess.textContent = message;
        ttsSuccess.classList.remove('hidden');
        ttsError.classList.add('hidden');
      }

      function hideMessages() {
        ttsError.classList.add('hidden');
        ttsSuccess.classList.add('hidden');
      }
    </script>
  </body>
</html>
